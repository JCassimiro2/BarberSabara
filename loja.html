<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loja - BarberSabará</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <!-- CSS personalizado -->
  <link href="css/styleLoja.css" rel="stylesheet"/>
  <!-- Ícones -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>

  <header class="loja-header bg-dark text-white py-3 position-relative">
    <div class="container d-flex align-items-center justify-content-between">
      <img src="img/logo.png" alt="Logo BarberSabará" class="logo-loja">

      <div class="pesquisa-container">
        <input type="text" id="campo-pesquisa" placeholder="Pesquisar produtos..." oninput="pesquisarProduto()" />
      </div>

      <p id="mensagem-nao-encontrado">Nenhum produto encontrado.</p>

      <h2 class="titulo-loja-centralizado mb-0">Loja</h2>
    </div>
  </header>    

  <div class="container my-5">
    <div class="row">
      <!-- Filtros -->
      <div class="col-md-3 filtros-loja">
        <h5>Filtrar por categoria:</h5>
        <div class="form-check">
          <input class="form-check-input filtro-produto" type="checkbox" value="pomada" id="filtroPomada">
          <label class="form-check-label" for="filtroPomada">Pomada</label>
        </div>
        <div class="form-check">
          <input class="form-check-input filtro-produto" type="checkbox" value="minoxidil" id="filtroMinoxidil">
          <label class="form-check-label" for="filtroMinoxidil">Minoxidil</label>
        </div>
        <div class="form-check">
          <input class="form-check-input filtro-produto" type="checkbox" value="shampoo" id="filtroShampoo">
          <label class="form-check-label" for="filtroShampoo">Shampoo</label>
        </div>
      </div>

      <!-- Produtos -->
      <div class="col-md-9">
        <div class="row g-4" id="lista-produtos">
          <div class="col-md-4 produto pomada">
            <div class="card h-100">
              <div class="card-body text-center">
                <h5 class="card-title nome-produto">Pomada Modeladora</h5>
                <p class="card-text descricao-produto">Alta fixação e brilho médio.</p>
                <p class="h6 text-primary">R$ 29,90</p>
              </div>
            </div>
          </div>
          <div class="col-md-4 produto minoxidil">
            <div class="card h-100">
              <div class="card-body text-center">
                <h5 class="card-title nome-produto">Minoxidil</h5>
                <p class="card-text descricao-produto">Tratamento para crescimento da barba.</p>
                <p class="h6 text-success">R$ 79,90</p>
              </div>
            </div>
          </div>
          <div class="col-md-4 produto shampoo">
            <div class="card h-100">
              <div class="card-body text-center">
                <h5 class="card-title nome-produto">Shampoo Anticaspa</h5>
                <p class="card-text descricao-produto">Combate a caspa com fórmula refrescante.</p>
                <p class="h6 text-warning">R$ 29,90</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botão Voltar -->
  <div class="container text-center">
    <button onclick="window.history.back()" class="btn btn-dark mb-4 voltar-btn">Voltar</button>
  </div>

  <!-- Scripts -->
  <script>
    function pesquisarProduto() {
      let input = document.getElementById('campo-pesquisa').value.toLowerCase();
      let produtos = document.querySelectorAll('.produto');
      let mensagemNaoEncontrado = document.getElementById('mensagem-nao-encontrado');
      let produtosEncontrados = false;

      produtos.forEach(function(produto) {
        let nome = produto.querySelector('.nome-produto')?.textContent.toLowerCase() || '';
        let descricao = produto.querySelector('.descricao-produto')?.textContent.toLowerCase() || '';

        if (nome.includes(input) || descricao.includes(input)) {
          produto.classList.remove('d-none');
          produtosEncontrados = true;
        } else {
          produto.classList.add('d-none');
        }
      });

      mensagemNaoEncontrado.style.display = produtosEncontrados ? 'none' : 'block';
    }

    document.querySelectorAll('.filtro-produto').forEach(filtro => {
      filtro.addEventListener('change', () => {
        const filtrosAtivos = Array.from(document.querySelectorAll('.filtro-produto:checked')).map(el => el.value);
        const produtos = document.querySelectorAll('#lista-produtos .produto');

        produtos.forEach(prod => {
          const classes = prod.classList;
          const visivel = filtrosAtivos.some(filtro => classes.contains(filtro));
          if (filtrosAtivos.length === 0 || visivel) {
            prod.classList.remove('d-none');
          } else {
            prod.classList.add('d-none');
          }
        });

        document.getElementById('campo-pesquisa').value = '';
        document.getElementById('mensagem-nao-encontrado').style.display = 'none';
      });
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
